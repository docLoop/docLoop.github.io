<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Global Type Definitions Annotation TODO! Type: Object AuthState Authorization data for client use. A truthy user value indicated that the session user is logged in with a third party service. Type: Object Properties: Name Type Argument Default Description user String &lt;optional&gt; null The username, login or id of the service the adapter makes use of link String &lt;optional&gt; null Authorization Url. This is the url the client is supposed to open in order to login with the service this adapters want to make use of. Make sure to also add a route to the adapters sub app in order to catch the callback or webhook or wahever your service calls after the authorization. Collection TODO: get own collections from adapter (???) Type: Object Decoration A Decoration object stores all the data the client need in order to visualize the resource pointed to by an identfier. Type: Object Properties: Name Type Argument Default Description image String &lt;optional&gt; null Url of an image title String &lt;optional&gt; 'Generic Endpoint' Title of the resource, the identifier points to details String &lt;optional&gt; 'unknown' Additonal information concerning the resource, the identfier points to EndpointData Type: Object Properties: Name Type Argument Description id String | bson &lt;optional&gt; The endpoint id. _id String | bson &lt;optional&gt; If id is not present _id will be used. This is handy, if the data comes directly form te database. identifier Identifier Uniquely identifies an external resource config config &lt;optional&gt; Configuration data decor Decoration &lt;optional&gt; Extra data for the client for visualization EndpointData Minimal data to instantiate a new Endpoint. Also: all the data the client might need. Type: Object Properties: Name Type Argument Description export.identifier Identifier export.config Object &lt;optional&gt; export.decor Decoration &lt;optional&gt; EndpointSkeleton The skeleton of an endpoint is a minimal set of data to identify an endpoint. Since adapters store endpoint data individually, the endpoint id alone is not enough. Type: Object Properties: Name Type Description id bson Endpoint id adapter String Adapter id Identifier Identifiers describe external resources to be used by an adapter. They will always have at least the adapter property and the external resource should be uniquely determined by the remaining properties. Two Endpoints can have euqal identifiers, if for example they are part of two different Links. Type: Object Properties: Name Type Description adapter string An adapter id. Any * other properties. Reply TODO! Type: Object × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Modules Classes DocloopCore EventQueue DocloopAdapter DocloopEndpoint DocloopError DocloopLink QueuedEvent GithubAdapter GithubApp GithubTarget GithubUser PaperhiveAdapter PaperhiveSource Events annotation TODO Type: Annotation link-established Type: LinkSkeleton link-removed Type: LinkSkeleton link-updated Type: LinkSkeleton -attempt An EventQueue emits this event periodically for every due event. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-attempt'). Type: module:docloop.EventQueue~QueuedEvent -done An EventQueue emits this event when the wrapped event is checked off. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-done'). Type: module:docloop.EventQueue~QueuedEvent -fail An EventQueue emits this event when the wrapped event had not been checked off after all retries where spent. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-fail'). Type: module:docloop.EventQueue~QueuedEvent × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Classes Classes DocloopCore EventQueue DocloopAdapter DocloopEndpoint DocloopError DocloopLink QueuedEvent GithubAdapter GithubApp GithubTarget GithubUser PaperhiveAdapter PaperhiveSource Events annotation TODO Type: Annotation link-established Type: LinkSkeleton link-removed Type: LinkSkeleton link-updated Type: LinkSkeleton -attempt An EventQueue emits this event periodically for every due event. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-attempt'). Type: module:docloop.EventQueue~QueuedEvent -done An EventQueue emits this event when the wrapped event is checked off. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-done'). Type: module:docloop.EventQueue~QueuedEvent -fail An EventQueue emits this event when the wrapped event had not been checked off after all retries where spent. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-fail'). Type: module:docloop.EventQueue~QueuedEvent × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Tutorials Classes DocloopCore EventQueue DocloopAdapter DocloopEndpoint DocloopError DocloopLink QueuedEvent GithubAdapter GithubApp GithubTarget GithubUser PaperhiveAdapter PaperhiveSource Events annotation TODO Type: Annotation link-established Type: LinkSkeleton link-removed Type: LinkSkeleton link-updated Type: LinkSkeleton -attempt An EventQueue emits this event periodically for every due event. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-attempt'). Type: module:docloop.EventQueue~QueuedEvent -done An EventQueue emits this event when the wrapped event is checked off. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-done'). Type: module:docloop.EventQueue~QueuedEvent -fail An EventQueue emits this event when the wrapped event had not been checked off after all retries where spent. The event name will be prefixed with the wrapped event's name (e.g. 'my-event-fail'). Type: module:docloop.EventQueue~QueuedEvent × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global docloopdocloop turns feedback into tasks, converting online annotations of a document into issues in the author's bug tracking system. For each platform you want to use with it you will need a separate adapter. The core module does not come with any real adapters, but here's two of them to install additionally: PaperhiveAdapter GithubAdapter With these two adapters in charge, docloop converts comments and replies of Paperhive documents into Github issues. Check the example app at https://app.docloop.net The core module and the two adapters are documented here: docloopDocs Requirementsdocloop is built using node and published using npm. To install it you need Node.JS. To actually run it you will also need a MongoDB to connect to. Quick startFirst of all get the core module: npm install docloopSetup up a MongoDB and use its credentials in the following minimal example: var docloop = require(&quot;docloop&quot;), DocloopCore = docloop.DocloopCore, DocloopAdapter = docloop.DocloopAdapter, DocloopEndpoint = docloop.DocloopEndpoint var docloopCore = new DocloopCore({ port: 7777, sessionSecret: 'abc', db:{ name: &quot;your_db_name&quot;, port: 27010, //or wherever your db is running user: &quot;your_db_user&quot;, //if authentication is required pass: &quot;your_db_pass&quot;, //if authentication is required address: &quot;127.0.0.1&quot; //or wherever your db is running } }) docloopCore .use(DocloopAdapter,{ id: 'custom-source-adapter', type: 'source', endpointClass: DocloopEndpoint, }) .use(DocloopAdapter,{ id: 'custom-target-adapter', type: 'target', endpointClass: DocloopEndpoint, }) .run()With this docloop is running on localhost:7777. Communication works via http requests. To actually see something you should get the client: docloopClient Clone the repository and serve the SRC-directory (will improve on that in the future). Set the backendUrl in app.js or config.js to localhost:7777 and the app should work with the exmaple code above. Alas, the example code doesn't do much. The DocloopAdapter is only a generic base class for custom adapters. It doesn't really do anything on its own. In Order to have the example do something useful you might want to install the above mentioned adpaters or write your own adapter class. Using the paperhive-adapter is straight forward. The github-adapter however requires you to setup a GithubApp beforehand. The example app uses the code from docloopBackend. Check the documenation for configuration options of the two adapters. There's also a tutorial for a more complex example with custom adapters. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"DocloopCore.html":{"id":"DocloopCore.html","title":"Class: DocloopCore","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: DocloopCore docloop DocloopCore The Docloop core system. An instance of this class is used to setup the application and will also be passed to all adapters as core. All events emitted by the adapters will be enhanced and reemmited on the core. See module:docloop.DocloopCore#relayEvent. new DocloopCore(config) Parameters: Name Type Description config Object Properties Name Type Argument Default Description name String &lt;optional&gt; Docloop Readable name for frontend output or to distinguish different instances of docloop. port Number The port the app will respond to. home String &lt;optional&gt; Project website clientUrl String &lt;optional&gt; / The url of the client. Some adapters will need this to redirect the user back to the client after some extenal authentication. sessionSecret: String Your session secret, used in express session config. db Object Database configuration Properties Name Type Argument Description address String mongo-db address name String mongo-db name port String mongo-db port user String &lt;optional&gt; mongo-db username pass String &lt;optional&gt; mongo-db password Properties: Name Type Description app ExpressApp The express app adapters Object Hash map of all used adapters. Adapters' ids are used as keys. sourceAdapters Array.&lt;Adapter&gt; Array of all used source adapters targetAdapters Array.&lt;Adapter&gt; Array of all used target adapters ready Promise Resolves when this instance is fully set up preventRelayEventNames Array.&lt;String&gt; Events that should not be relayed Fires: event:link-established event:link-removed event:link-updated Members &lt;route&gt; getSingleLink Route: MethodPath GET /links/:id Calls DocloopCore#handleGetLinkRequest. Route Parameters: Name Type Description id String Link id Methods &lt;async&gt; getStoredLink(mongo-db) Get a strored link. Parameters: Name Type Description mongo-db string | bson id Throws: If id cannot be converted to ObjectId. Type TypeError If no link was found matching the id. Type DocloopError | 404 If the stored link's source skeleton is missing or incomplete. Type DocloopError If the stored link's target skeleton is missing or incomplete. Type DocloopError If there is no registered adapter to match the source adapter. Type DocloopError If there is no registered adapter to match the target adapter. Type DocloopError If the source or target cannot be read from the respective collections. Type DocloopError Returns: Type DocloopLink &lt;async, route&gt; handleDeleteLinkRequest(req, res) Route: MethodPath DELETE /link/:id Express request handler. Removes a link. Parameters: Name Type Description req Object Express request object Properties Name Type Description params Object Request paramteres Properties Name Type Description id Object Link id res Object Express result object Returns: undefined &lt;async, route&gt; handleDropSessionRequest(req, res) Route: MethodPath GET /dropsession Express request handler. Destroys the current session. Parameters: Name Type Description req Object Express request object res Object Express result object Returns: undefined &lt;async, route&gt; handleGetAdaptersRequest(req, res) Route: MethodPath GET /adapters Express request handler. Get data for all adapters. Parameters: Name Type Description req Object Express request object res Object Express result object Returns: undefined &lt;async, route&gt; handleGetLinkRequest(req, res) Route: MethodPath GET /links/:id Express request handler. Get data of a single link. Parameters: Name Type Description req Object Express request object Properties Name Type Description param Object Request paramters Properties Name Type Description id Object Link id res Object Express result object Returns: undefined &lt;async, route&gt; handleGetLinksRequest(req, res) Route: MethodPath GET /links Express request handler. Gets data of all link accessible by the current session. Parameters: Name Type Description req Object Express request object res Object Express result object Returns: undefined &lt;async, route&gt; handleGetRootRequest(req, res) Route: MethodPath GET / Express request handler. Returns basic app information. Parameters: Name Type Description req Object Express request object res Object Express result object Returns: App information Type AppData &lt;async, route&gt; handlePostLinkRequest(req, res) Route: MethodPath POST /links Express request handler. Creates a new link out of posted source and target, validates and stores the link. Parameters: Name Type Description req Object Express request object Properties Name Type Description body Object Request body Properties Name Type Description source EndpointData Source Data target EndpointData Target Data res Object Express result object Fires: event:link-established Throws: If source or target is missing Type DocloopError | 400 If either source or target wont validate. See DocloopLink._validate. Type * If there's already another link between the same source and target. See DocloopLink.preventDuplicate Type * If link cannot be stored Type DocloopError | 500 Returns: undefined &lt;async, route&gt; handlePutLinkRequest(req, res) Route: MethodPath PUT /links/:id Express request handler. Updates an existing link. (Todo: should only update config) Parameters: Name Type Description req Object Express request object Properties Name Type Description params Object Request paramters Properties Name Type Description id Object body Object Request body Properties Name Type Description source EndpointData Sourcet data target EndpointData Target data res Object Express result object Fires: event:link-updated Throws: If id, source or target is missing Type DocloopError | 400 Returns: undefined newLink(data) Create new instance of DocLoopLink with this as core using the provided data. Parameters: Name Type Description data object Configuration data for the new DocloopLink instance. Returns: Type DocloopLink &lt;async&gt; relayEvent(event_name, data) Relays an event if it has a source property. For every Link with that source reemits the events on core replacing the source property with the link's target. This way one adapter can emit an event and everyother (linked) adapter can listen to it on the core. Parameters: Name Type Description event_name String The event name data data Event data Throws: If either source.id or source.adapter is missing. Type ReferenceError Returns: undefined &lt;async&gt; run() Start the App and listen to the configured port. Returns: Type Promise &lt;async&gt; use(AdapterClass, config) Will instantiate AdapterClass once with this as core and the provided configuration object. The new instance will be added to the list of adapters. Parameters: Name Type Description AdapterClass DocloopAdapter Any Class extending DocloopAdapter config Object The configuration object for th custim adapter class. Throws: If another adapter with the same id is already in use. Type DocloopError | 409 Returns: this for chaining × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:35+01:00 using the DocStrap template. "},"EventQueue.html":{"id":"EventQueue.html","title":"Class: EventQueue","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: EventQueue docloop EventQueue Class representing a queue of events to be checked off or repeated if need be. Every event added to the qeue will be wrapped into a QueuedEvent. And that in turn will be emitted periodically as -attempt event until it exceeds the maximal number of retries, is abandoned for some other reason or is checked off. new EventQueue(config) Parameters: Name Type Description config Object Properties Name Type Argument Default Description collection Collection MongoDb collection. Sets collection property. delay Number | Array.&lt;Number&gt; | function &lt;optional&gt; Sets delay property. maxRetries Number &lt;optional&gt; 3 Sets maxRetries property. processInterval Number &lt;optional&gt; Milliseconds. Time until the qeue checks again for due events. spread Number &lt;optional&gt; 1000 Sets spread property. Properties: Name Type Argument Default Description collection Collection This is where the queue stores active events. delay Number | Array.&lt;Number&gt; | function &lt;optional&gt; Delay until the event will fire again if not checked off. If an array is provided the nth retry will be delayed for this.delay[n-1] milliseconds. If a function is provided the nth attempt will be delayed for this.delay(n) milliseconds. Defaults to: (attempts =&gt; Math.pow(10, attempts)*1000) maxRetries Number &lt;optional&gt; 3 Number of retries until the event will be marked as failed. if this.delay is an array, this value defaults to this.delay.length. spread Number &lt;optional&gt; 1000 Milliseconds. If multiple events are due to retrial, they wont fire all at once but will be spread with a fixed delay between each of them. processInterval Number Milliseconds. Time until the queue checks again for due events. timeout Timeout The Timeout object returned by setInterval for the periodical check. Methods _getDelay(attempts) Returns the delay for the nth retry. The 0th retry is considered the first attempt and has no delay. Parameters: Name Type Description attempts Number Number of previous attempts. Returns: Type Number | undefined &lt;async&gt; add(event_name [, event]) Adds an event to the queue. For every added event the queue will immediately emit an module:docloop.EventQueue.event:attempt. Parameters: Name Type Argument Default Description event_name String An event name event Object &lt;optional&gt; {} Data associated with the event Returns: Type module:docloop.EventQueue~QueuedEvent &lt;async&gt; clear() Removes all events from the queue without further notice. &lt;async&gt; process() Checks if events are due for retries or have failed. Every event that has more attempts than .maxRetries will be abandoned. Every event that is due will be attempted. Fires: -attempt -fail start() Starts looking periodically for due or failed events. Returns: Type this stop() Stops looking periodically for due or failed events. Returns: Type this × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.DocloopLink.html":{"id":"module-docloop.DocloopLink.html","title":"Class: DocloopLink","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: DocloopLink docloop. DocloopLink new DocloopLink(core, data) Parameters: Name Type Description core DocloopCore The core system. Since Core is a Factory for Links, this param will usually be set automatically. data Object Properties Name Type Argument Description id String | bson &lt;optional&gt; Link id. _id String | bson &lt;optional&gt; If data.id is not present _id will be used. This is handy, if the data comes directly form te database. source EndpointData target EndpointData Properties: Name Type Description id bson source Endpoint An endpoint representing a source of annotations target Endpoint An endpoint representing a target resource for issues Throws: If core is missing . Type ReferenceError If core is not an instance of DocloopCore. Type TypeError If data is missing . Type ReferenceError Members export Extracts raw data from the link. skeleton Extracts minimal data from the link to find it in the database Methods &lt;async&gt; _validate(Express) Checks if the current session has acces to source and target with Endpoint#_validate Parameters: Name Type Description Express session session Returns: Type undefined importData(data, source, source) Imports source and target data. Mainly used by the constructor. Parameters: Name Type Description data Object source EndpointData Source endpoint data as used in the DocloopEndpoint#constructor source EndpointData Target endpoint data as used in the DocloopEndpoint#constructor returns {this} &lt;async&gt; preventDuplicate() Check if there already exists a link with the same source identifier and the same target identifier as the link at hand. If so throws and error. Throws: If duplicate exists Type DocloopError Returns: for chaining Type this &lt;async&gt; remove() Removes the link from the database. First it removes source and target from the database, then the actual link document. Throws: If this.id is missing. This happens most likely if the link had not been stored. Type ReferenceError Returns: Type undefined &lt;async&gt; store() Stores the link to the database as new document. First it stores its source and target, then stores a new document using the data from DocLLoopLink#.skeleton Returns: The mongo-db id for the inserted document. Type bson &lt;async&gt; update() Updates source and target using DocloopEndpoint#update Type Definitions LinkSkeleton Type: Object Properties: Name Type Description id bson Link id source EndpointSkeleton Source skeleton target EndpointSkeleton Target skeleton × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.html":{"id":"module-docloop.html","title":"Module: docloop","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Module: docloop TODO: Description for tis module License: GPL-3.0 Classes DocloopCore EventQueue DocloopAdapter DocloopEndpoint DocloopError DocloopLink Methods &lt;static&gt; cacheCalls(obj, method_name, ttl) Replaces a method of provided object with a proxy, that will cache the return value of the original method for the givin period of time. If the proxy is called the original method will be called only if there is no cached value. The proxy method will allways wrap the original method in a Promise. This may help to prevent redundant API calls (e.g. if you know that the result of an API call will not change in the next 10 seconds) Two calls with different arguments will be cached separately. Two sets of arguments are considered equal if their JSON representaions are equal. The orginial method can be restored with obj[method_name].restore(). Parameters: Name Type Default Description obj Object Target object method_name String Name of the method whose calls should be cached. ttl Number 1000 Time to live for the cache values in milliseconds. Throws: If method_name does not point to a function. Type TypeError Returns: undefined &lt;static&gt; catchAsyncErrors(fn) Wrapper for express request handlers to catch rejected promises or async methods. Parameters: Name Type Description fn function Express request handler to wrap Returns: Wrapped request handler Type function &lt;static&gt; collateCalls(obj, method_name [, force_call_after]) Replaces a method of provided object with a proxy, that will prevent multiple calls to the original method with the same arguments while waiting for a response. The proxy method will allways wrap the original method in a Promise. If a previous call with the same arguments is still pending the proxy will return the corresponding promise. This may help to prevent multiple redudant API calls. (e.g. when you dont expect the result of an API call to change while it's pending) Two sets of arguments are considered equal if their JSON representaions are equal. The orginial method can be restored with obj[method_name].restore(). Parameters: Name Type Argument Default Description obj Object Target object method_name string Name of the method whose calls should be callated force_call_after Number &lt;optional&gt; 1000 After this time (in milliseconds) the proxy will call the original method, regardless of previous calls still pending. Throws: If method_name does not point to a function. Type TypeError Returns: undefined &lt;static&gt; errorHandler(err, req, res, next) Custom Express error handler, tailored to work with DocloopError. Will terminate a request with a proposed error code if error is instance of DocloopError, will use 500 if not. Parameters: Name Type Description err Object Express error req Object Express request res Object Express result next function Express next Returns: Type undefined &lt;static&gt; serializeCalls(obj, method_names) Replaces a method of provided object with a proxy, that will chain consecutive calls: So the orginal method will be called right after all previous calls have been resolved or rejected. The proxy method will allways wrap the original method in a Promise. You can provide an array of method names to serialize multiple methods at once. This may help to prevent timing conflicts of multiple calls. The orginial mthod can be restored with obj.[method_name].restore(). Parameters: Name Type Description obj Object Target object method_names string | Array.&lt;string&gt; Name(s) of the method(s) whose calls should be serialized. Throws: If one of the method names does not point to a function. Type TypeError Returns: undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.DocloopAdapter.html":{"id":"module-docloop.DocloopAdapter.html","title":"Class: DocloopAdapter","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: DocloopAdapter docloop. DocloopAdapter This Class and any Class that extends DocloopAdapter are supposed to be passed to DocloopCore.use(). All methods that start with an underscore '_' expect the actual session to be passed as argument and will usually have a counterpart without the leading underscore that expects the adapter's session data as argument instead. The preferred way for an adapter to communicate with the core system or other adapters is through events. See module:docloop.DocloopCore#relayEvent. Tutorial: Custom adapters new DocloopAdapter(core, config) Parameters: Name Type Description core DocloopCore An instance of the docloop core. config Object Properties Name Type Argument Default Description id String The id this adapter should be identified by (e.g. 'github'). extraId String &lt;optional&gt; This maybe useful if a custom adapter has a fixed id, but is supposed to be instantiated twice with different configs. name String &lt;optional&gt; 'DocloopAdapter' A pretty name for the Adapter, that can actually be used in a client. type String Either 'source' or 'target'. endPointClass DocloopEndpoint &lt;optional&gt; DocloopEndpoint Endpoint class or any class extending Endpoint. extraEndpoints boolean &lt;optional&gt; false True iff there are valid endpoints that are not returned by .getEndpoints() endpointDefaultConfig Object &lt;optional&gt; {} Configuration object with default values for endpoints. These values will be used if no other values are provided when a new enpoint is created. extraEndpoints boolean true iff there are valid endpoints that are not returned by .getEndpoints() Properties: Name Type Argument Description core DocloopCore id String name String type String endPointClass DocloopEndpoint endpointDefaultConfig Object app ExpressApp Express sub app of core.app. All routes will be relative to '/adapters/'+this.id. endpoints Collection Mongo-db collection for stored endpoints. help String &lt;optional&gt; Help text used by the client. Extends EventEmitter Methods _clearSessionData(session) Clears the data associated with this adapter in the provided session object. Returns an empty object. Modifying its values will modify the session. Parameters: Name Type Description session Session Express session Returns: Empty session data Type Object &lt;async&gt; _getAuthState(session) Calls .getAuthState() with sessionData. Parameters: Name Type Description session Session Express session Returns: Type Object &lt;async&gt; _getData(session) Collects adapter data for client use. Parameters: Name Type Description session Session Express session Returns: Type AdapterData &lt;async&gt; _getEndpoints(session) Calls .getEndpoints() with sessionData. Parameters: Name Type Description session Session Express session Returns: Type Array.&lt;DocloopEndpoint&gt; _getSessionData(session) Extracts the data associated with this adapter in the provided session object. Modifying its values will modify the session. Parameters: Name Type Description session Session Express session Returns: Adapter's session data Type Object &lt;async&gt; _getStoredEndpoint(id, session) Calls .getStoredEndpoint() with sessionData. Parameters: Name Type Description id String | bson session Session Express session Returns: Type ValidEndpoint &lt;async&gt; _getStoredEndpoints(session) Calls .getStoredEndpoints with sessionData. Parameters: Name Type Description session Session Express session Returns: Type Array.&lt;DocloopEndpoint&gt; &lt;async, route&gt; _handleGetEndpointsRequest(req, res) Route: MethodPath GET /adapters/:adapter-id/endpoints Express request handler. Sends privileged Enpoints to the client. Parameters: Name Type Description req Object Express request object res Object Express result object &lt;async, route&gt; _handleGetGuessEndpointRequest(req, res) Route: MethodPath GET /adapters/:adapter-id/guessEndpoint/:str Express request handler. Guesses Endpoint from request paramter and sends it to the client. Parameters: Name Type Description req Object Express request object Properties Name Type Description params Object Request parameters Properties Name Type Description str String String to guess the endpoint from res Object Express result object &lt;async, route&gt; _handleGetRequest(req, res) Route: MethodPath GET /adapters/:adapter-id Express request handler. Sends AdapterData to the client. Parameters: Name Type Description req Object Express request object res Object Express result object &lt;async, route&gt; _handlePostSignOff() Route: MethodPath GET /adapters/:adapter-id/signoff Express request handler. Clears current session data for this adapter. &lt;async, abstract&gt; getAuthState(session_data) This method is meant to be overwritten by a custom adapter class. Returns the authorization state for the adapter in the current session. Parameters: Name Type Description session_data Object Data of the current session associated with this adapter Returns: Type AuthState &lt;async, abstract&gt; getEndpoints(session_data) This method is meant to be overwritten by a custom adapter class. Returns valid endpoints the current session has privileged access to. Parameters: Name Type Description session_data Object Data of the current session associated with this adapter Returns: Type Array.&lt;ValidEndpoint&gt; &lt;async&gt; getStoredEndpoint(id, session) Returns the endpoint with the provided id. Throws an error if it cannot be found or the session lacks privileges to access it. Parameters: Name Type Description id String | bson Mongo-db id session Object Express session Throws: If the endpoint cannot be found. Type DocloopError If the endpoint cannot be validated for the session. Type DocloopError Returns: Type Endpoint &lt;async, abstract&gt; getStoredEndpoints() This method is meant to be overwritten by a custom adapter class. Retuns all endpoints stored in the db, that are also valid for the current session. Returns: Type Array.&lt;ValidEndpoint&gt; newEndpoint(data) Creates a new instance of the endpoint class associated with this adapter. The new endpoint's adapter will be set to this adapter. Parameters: Name Type Description data Object Data to instantiate the endpoint with. Returns: Endpoint Type DocloopEndpoint Type Definitions Adapter An instance of either DocloopAdapter or any Class extending it. Type: Object AdapterClass Either DocloopAdapter or any Class extending it. Type: Class AdapterData Data concerning an adapter meant for client use. Type: Object Properties: Name Type Description id String The adapter's id name String The adapter's name type String The adapter's type extraEndpoints boolean The adapter's .extraEndpoints value endpointDefaultConfig Object The adapter's .endpointDefaultConfig'value auth AuthState The adapters authorization state. (see ...) Annotation TODO Events annotation TODO Type: Annotation × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.DocloopEndpoint.html":{"id":"module-docloop.DocloopEndpoint.html","title":"Class: DocloopEndpoint","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: DocloopEndpoint docloop. DocloopEndpoint This is the base class for all endpoints, sources and targets alike. Any source or target should extend DocloopEndpoint. new DocloopEndpoint(adapter, data) Parameters: Name Type Description adapter DocloopAdapter data EndpointData Set the corresponding proprties on the endpoint object. Properties: Name Type Description identifier Identifier Uniquely identifies an external resource config config Configuration data decor Decoration Extra data for the client for visualization adapter DocloopAdapter The adapter an endpoint is associated with id bson skeleton EndpointSkeleton Getter export EndpointData Getter Methods &lt;async, abstract, static&gt; guess(str, session_data) This method is meant to be overwritten by a custom endpoint class. Returns a single valid endpoint guessed from the provided string. Parameters: Name Type Description str string A string from which to guess the Endpoint identifier session_data Object Data of the current session associated with this adapter Returns: Type ValidEndpoint &lt;async&gt; _updateDecor(session) Calls .updateDecor with SessionData. Parameters: Name Type Description session Session Returns: Type undefined &lt;async&gt; _validate(session) Calls DocloopEndpoint#validate with SessionData Parameters: Name Type Description session Session Returns: Type undefined &lt;async&gt; getData(key) Retrieves data stored alongside the endpoint document. Parameters: Name Type Description key String The key, where the data is stored at. Returns: Data stored at the key. Type Object | String | Number match(endpoint_or_identifier) Checks if the provided Object points to the same external Resource as the endpoint's identifier. Parameters: Name Type Description endpoint_or_identifier Identifier | DocloopEndpoint And identifier or any instance of DocloopEndpoint or a class that extends DocloopEndpoint. Returns: True if endpoint_or_identifier and the current endpoint point to the same external resource. Type boolean &lt;async&gt; remove() Removes te endpoint document from the database. Returns: Type undefined &lt;async&gt; setData(key, data) Stores arbitrary data alongside the endpoint document. Parameters: Name Type Description key String A key to store the data at. data Object | String | Number The data to be stored at the key. Returns: Type undefined &lt;async&gt; store() Stores the endpoint to the database as new document. (Using the data from .export()) Returns: The mongo-db id for the inserted document. Type bson &lt;async&gt; update() Updates document associated with the endpoint using the data from .export. Throws: If this.id is undefined (i.e. the endpoint has not been stored yet) Type ReferenceError Returns: Type undefined &lt;async&gt; updateDecor(sesion_data) This method is meant to be overwritten. //TODO: is this usefull? Parameters: Name Type Description sesion_data SessionData Returns: Type undefined &lt;async, abstract&gt; validate(session_data) This method is meant ot bew overwritten. Checks if the current session has access to the resource pointed at by the endpoint's identifier. Whenever an endpoint passes .validate() the endpoint and any link using this endpoint can be modified during this session. Parameters: Name Type Description session_data SessionData Returns: Type undefined Type Definitions Endpoint An endpoint is an instance of either DocloopEndpoint or any class extending it. Type: Object EndpointClass An endpoint class is either DocloopEndpoint or any class extending it. Type: Class ValidEndpoint A valid endpoint is an endpoint that passes .validate() for the current session. Iff an endpoint is considered valid for a session, all links associated with this endpoint can be modified during this session. Type: Endpoint × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.DocloopError.html":{"id":"module-docloop.DocloopError.html","title":"Class: DocloopError","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: DocloopError docloop. DocloopError Custom error. Since most http requests will be handled by the docloop core or one of the base classes, it is difficult for adapters to set the status code themselves. This error class lets them make a proposal for the error code, for when the error at hand eventually causes a request to fail. new DocloopError(message, status) Parameters: Name Type Description message String Error description status Number Proposed HTML status code in case this error causes a request to fail. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-docloop.EventQueue-QueuedEvent.html":{"id":"module-docloop.EventQueue-QueuedEvent.html","title":"Class: QueuedEvent","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: QueuedEvent QueuedEvent Class representing a queued event. Instances of this class will be created by an EventQueue. new QueuedEvent(queue, data) Parameters: Name Type Description queue module:docloop.EventQueue The event queue this event is queued in. data Object Properties Name Type Argument Default Description event Object &lt;optional&gt; {} Sets data property. eventName String Sets eventName property. lastAttempt lastAttempt &lt;optional&gt; 0 Sets lastAttempt property. attempts attempts &lt;optional&gt; 0 Sets attempts property. Properties: Name Type Description event Object Data of the original event. eventName String Name of the original event. lastAttempt lastAttempt Timestamp of the last attempt to process this event. attempts attempts Number of attempts. Methods &lt;async&gt; abandon(reason) Emits an -fail event and removes the queued event from the queue. Parameters: Name Type Description reason Error | String Error or Reason that let to the abandonment. Returns: undefined &lt;async&gt; attempt() Emits an -attempt event and increases the number of attempts. Returns: undefined &lt;async&gt; checkOff() Emits an -done event and removes the queued event from the queue. Returns: undefined &lt;async&gt; remove() Removes the queued event form the database. Returns: Result of db.collection.remove() Type Object &lt;async&gt; store() Stores the queued event to the database. Returns: Result of db.collection.findOneAndReplace() Type Object | Boolean &lt;async&gt; update() Updates the event in the database, increasing the number of attempts by one and setting lastAttempt to now. Returns: undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-githubAdapter.html":{"id":"module-githubAdapter.html","title":"Module: githubAdapter","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Module: githubAdapter TODO: description! TODO: throw Errors when misconfigured. Classes GithubAdapter GithubApp GithubTarget GithubUser × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-githubAdapter.GithubAdapter.html":{"id":"module-githubAdapter.GithubAdapter.html","title":"Class: GithubAdapter","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: GithubAdapter githubAdapter. GithubAdapter Adapter to post issues and comments on github TODO: description TODO: eventque details TODO: Defaults TODO: typedefs for params and proerties. The following arguments and properties are on top of the arguments and properties of DocloopAdapter. new GithubAdapter(core, config [, eventQueue]) Parameters: Name Type Argument Description core DocloopCore config Object Properties Name Type Argument Description appId String GithubApp Id. appPrivateKey String &lt;optional&gt; GithubApp private. If not provided config.appPrivateKeyLocation is required. appPrivateKeyLocation String &lt;optional&gt; GithubApp private key location. Can only be omitted if config.appPrivateKey is present. eventQueue Object &lt;optional&gt; EventQueue config. See EventQueue. config.oAuth Object Data to authorize GithubApp. Sets .oAuth property. config.dummy Object Sets dummy property. Properties: Name Type Description endpointDefaultConfig.label String Name of the label to tag a new issue with githubUser GithubUser API wrapper for github user interaction githubApp GithubAPP API wrapper for github app interaction oAuth Object events Collection Mongo-db collection for stored events eventQueue EventQueue The event queue the event is stored in oAuth Object OAuth credentials has provided. Properties Name Type Description clientSecret String accessTokenUrl String Url to retrieve an access token from after github posted to Callback (See: GithubApps) authUrl String Url to open for the user to enter credentials. dummy Object Content of the dummy issue created when a comment is missing its parent issue. Properties Name Type Description title Object Title of the dummy issue. body Object Body of the dummy issze. Extends module:docloop.DocloopAdapter Methods _clearSessionData(session) Clears the data associated with this adapter in the provided session object. Returns an empty object. Modifying its values will modify the session. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_clearSessionData Returns: Empty session data Type Object &lt;async&gt; _getAuthState(session) Calls .getAuthState() with sessionData. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_getAuthState Returns: Type Object &lt;async&gt; _getData(session) Collects adapter data for client use. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_getData Returns: Type AdapterData &lt;async&gt; _getEndpoints(session) Calls .getEndpoints() with sessionData. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_getEndpoints Returns: Type Array.&lt;DocloopEndpoint&gt; _getSessionData(session) Extracts the data associated with this adapter in the provided session object. Modifying its values will modify the session. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_getSessionData Returns: Adapter's session data Type Object &lt;async&gt; _getStoredEndpoint(id, session) Calls .getStoredEndpoint() with sessionData. Parameters: Name Type Description id String | bson session Session Express session Inherited From: module:docloop.DocloopAdapter#_getStoredEndpoint Returns: Type ValidEndpoint &lt;async&gt; _getStoredEndpoints(session) Calls .getStoredEndpoints with sessionData. Parameters: Name Type Description session Session Express session Inherited From: module:docloop.DocloopAdapter#_getStoredEndpoints Returns: Type Array.&lt;DocloopEndpoint&gt; &lt;async&gt; getAuthState(session_data) Parameters: Name Type Description session_data session_data Overrides: module:docloop.DocloopAdapter#getAuthState Returns: Type AuthState &lt;async&gt; getEndpoints(session_data) This method is meant to be overwritten by a custom adapter class. Returns valid endpoints the current session has privileged access to. Parameters: Name Type Description session_data Object Data of the current session associated with this adapter Inherited From: module:docloop.DocloopAdapter#getEndpoints Overrides: module:docloop.DocloopAdapter#getEndpoints Returns: Type Array.&lt;ValidEndpoint&gt; &lt;async&gt; getStoredEndpoint(id, session) Returns the endpoint with the provided id. Throws an error if it cannot be found or the session lacks privileges to access it. Parameters: Name Type Description id String | bson Mongo-db id session Object Express session Inherited From: module:docloop.DocloopAdapter#getStoredEndpoint Throws: If the endpoint cannot be found. Type DocloopError If the endpoint cannot be validated for the session. Type DocloopError Returns: Type Endpoint &lt;async&gt; getStoredEndpoints() This method is meant to be overwritten by a custom adapter class. Retuns all endpoints stored in the db, that are also valid for the current session. Inherited From: module:docloop.DocloopAdapter#getStoredEndpoints Overrides: module:docloop.DocloopAdapter#getStoredEndpoints Returns: Type Array.&lt;ValidEndpoint&gt; &lt;async&gt; getUserRepos(session_data) Get all Github repositories for the user authorized for with the access token in session data. Parameters: Name Type Description session_data SessionData Returns: Type Array.&lt;Object&gt; &lt;async, route&gt; handleOAuthCallback(req, res) Route: MethodPath GET /adapters/github/oauth/callback Handle request sent by github after successful authorization. Uses the app config data and posted code to gain access token from github and store it in session data for later use. If successful redirects back to the configured front end url. Parameters: Name Type Description req Object Express request object res Object Express result object Throws: If not successful Type DocloopError Returns: undefined newEndpoint(data) Creates a new instance of the endpoint class associated with this adapter. The new endpoint's adapter will be set to this adapter. Parameters: Name Type Description data Object Data to instantiate the endpoint with. Inherited From: module:docloop.DocloopAdapter#newEndpoint Returns: Endpoint Type DocloopEndpoint queueAnnotationEvent(Annotation) Add an annotation event to the event queue Parameters: Name Type Description Annotation Annotation from an annotation event Returns: Type undefined queueReplyEvent(Reply) Add an reply event to the event queue Parameters: Name Type Description Reply Reply from an reply event# Returns: Type undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-githubAdapter.GithubApp.html":{"id":"module-githubAdapter.GithubApp.html","title":"Class: GithubApp","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: GithubApp githubAdapter. GithubApp Class representing minimal Github API wrapper for app interaction. new GithubApp(config) Parameters: Name Type Description config Object Properties Name Type Description id String GithubApp Id cert String GithubApp private key data Properties: Name Type Description app Object Instance of github-app (TODO:add link) Methods &lt;async&gt; createOrUpdateComment(target_identifier, comment) Create or update an Issue. If comment.id is provided, update the corresponding comment, otherwise create a new one. Parameters: Name Type Description target_identifier Identifier Identifier pointing at a github repository comment Comment Returns: The github comment number Type String &lt;async&gt; createOrUpdateIssue(target_identifier, issue) Create or Update an Issue. If issue.number is provided, update the corresponding issue, otherwise create a new one . Parameters: Name Type Description target_identifier Identifier Identifier pointing at a github repository issue Issue Returns: The github issue number Type String &lt;async&gt; getRepositories(installation_id) Get all repositories the installation has access to. This method is augumented by module:docloop#cache(2000). Return values will be cached for 2 seconds, to prevent huge numbers of API calls. Parameters: Name Type Description installation_id String GithubApp installation id Returns: For each repository a subset of the data provided by github. Type Array.&lt;Object&gt; × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-githubAdapter.GithubTarget.html":{"id":"module-githubAdapter.GithubTarget.html","title":"Class: GithubTarget","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: GithubTarget githubAdapter. GithubTarget Class representing the Github issue tracker. new GithubTarget() Throws: TODO Type TODO Extends DocloopEndpoint Methods &lt;static&gt; fromRepo(adapter, repo) Creates a new Endpoint from a set of repository data, Parameters: Name Type Description adapter Adapter repo Object Repository data Returns: Type Endpoint &lt;static&gt; repoToDecor(repo) Extract decoration data from repositpry data. Parameters: Name Type Description repo Object Repository data Returns: Type Decoration annotation2Issue(annotation) Turn an Annotation into isuue data ready to be posted to the github API. Parameters: Name Type Description annotation Annotation Returns: Type Issue &lt;async&gt; ensureIssueNumber(annotation_id) Makes sure there is an issue corresponding to the provided annotation id. If there is no such issue existing yet, then create a dummy issue and return its issue number. This is useful if a reply event fires before its parent annotation event. This can happen if the annotation is old and has never been imported or the import has been delayed for some reason. Parameters: Name Type Description annotation_id String Id from the original source Throws: If TODO Type TODO Returns: Github issue number Type String &lt;async&gt; getCommentId(Reply) Get a stored comment id correspoding to a reply id. Parameters: Name Type Description Reply reply_id Id from the original source. Throws: If TODO Type TODO Returns: Corresponding comment id Type String &lt;async&gt; getIssueNumber(Id) Get a stored issue number correspoding to an annotation id. Parameters: Name Type Description Id annotation_id from the original source. Throws: If TODO Type TODO Returns: Corresponding issue number Type String &lt;async&gt; handleAnnotation(annotation) Handle annotation event. Update or create a corresponding issue on Github. Parameters: Name Type Description annotation Annotation Throws: If TODO Type TODO Returns: Type undefined &lt;async&gt; handleReply(reply) Handle reply event. Update or create a corresponding comment on Github. Parameters: Name Type Description reply Reply Throws: If TODO Type TODO Returns: Type undefined reply2Comment(reply) Turn an Reply into comment data ready to be posted to the github API. Parameters: Name Type Description reply Reply Returns: Comment data Type Object &lt;async&gt; storeCommentId(reply_id, comment_id) Stores connection between an reply and a coment number. If the same reply event fires again the correspondin comment will be updated/overwritten. Parameters: Name Type Description reply_id String Reply id from the original source. comment_id String Github comment_id Throws: If TODO Type TODO Returns: Type undefined &lt;async&gt; storeIssueNumber(annotation_id, issue_number) Stores connection between an annotation and an issue number. This serves two purposes: If the same annotation event fires again the same issue will be updated/overwritten. If a reply event fires, a comment can be placed into the corresponding issue. Parameters: Name Type Description annotation_id String Id from the original source. issue_number String Github issue number Throws: If TODO Type TODO Returns: Type undefined &lt;async&gt; updateDecor(session_data) TODO: Rethink decoration Parameters: Name Type Description session_data SessionData Throws: If TODO Type TODO Returns: Type undefined &lt;async&gt; validate(session_data) Check if the current session has access to the repository the endpoint's identifier points to. Parameters: Name Type Description session_data SessionData Throws: If current session cannot access the repository Type DocloopError | 403 Returns: Type undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-githubAdapter.GithubUser.html":{"id":"module-githubAdapter.GithubUser.html","title":"Class: GithubUser","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: GithubUser githubAdapter. GithubUser Class representing minimal Github API wrapper for user interaction. new GithubUser() Properties: Name Type Description github Instance of GitHubApi (TODO: add link) Methods &lt;async&gt; get(token) Get Github user data. This method is augumented by module:docloop#cache(2000) return value will be cached for 2 seconds in order to prevent huge numbers of API calls. Parameters: Name Type Description token String Github user access token Throws: If token is not a string. Type TypeError Returns: Github user data Type Object &lt;async&gt; getInstallations(token) Get data for all installations granted access to by provided access token. This method is augumented by module:docloop#cache(2000) return value will be cached for 2 seconds in order to prevent huge numbers of API calls. Parameters: Name Type Description token String Github user access token Returns: Installation id of each accessible installation Type Array.&lt;Object&gt; × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-paperhiveAdapter.html":{"id":"module-paperhiveAdapter.html","title":"Module: paperhiveAdapter","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Module: paperhiveAdapter TODO: description! Classes PaperhiveAdapter PaperhiveSource × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-paperhiveAdapter.PaperhiveAdapter.html":{"id":"module-paperhiveAdapter.PaperhiveAdapter.html","title":"Class: PaperhiveAdapter","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: PaperhiveAdapter paperhiveAdapter. PaperhiveAdapter Adapter to harvest public annotations from paperhive. new PaperhiveAdapter(core, config, home, contentLink, extraEndpoints, scanningInterval) Parameters: Name Type Description core DocloopCore config Object Configuration object home String Website of the used paperhive instance. contentLink String Url of paperhive doument's discussion. Use %s in this string to indicate the positin of the document's id. extraEndpoints Boolean True iff there are addtional non privileged endpoints. scanningInterval Number Time between two scans in milliseconds. Properties: Name Type Description endpointDefaultConfig Object Properties Name Type Description includePastAnnotations Object If set to true, the adapter will collect all annotations from a source, as soon as a link is established. This might be undesirable for documents with a large amount of annotations. Extends DocloopAdapter Methods &lt;async&gt; getEndpoints() There are no privileged endpoints. This Adapter only uses public paperhive documents. Returns: [] Type Array &lt;async&gt; getStoredEndpoints() There are no privileged endpoints. This Adapter only uses public paperhive documents. Returns: [] Type Array &lt;async&gt; handleLinkEstablishedEvent(link) If the source matches this adapter it will be scanned for annotations and replies. Parameters: Name Type Description link DocloopLink.skeleton Listens to Events: event:link-established Returns: undefined &lt;async&gt; scanSources() Scan all stored source for new annotations or replies Returns: undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"module-paperhiveAdapter.PaperhiveSource.html":{"id":"module-paperhiveAdapter.PaperhiveSource.html","title":"Class: PaperhiveSource","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Class: PaperhiveSource paperhiveAdapter. PaperhiveSource Class representing a paperhive document. new PaperhiveSource() Extends DocloopEndpoint Methods &lt;static&gt; documentToDecor(ph_document) Translates document data into EndpointDecoration. Parameters: Name Type Description ph_document Object Data of a paperhive document. See PaperhiveSource.getDocument Returns: Type Decoration &lt;static&gt; fromDocument(adapter, ph_document) Creates a new instance of Paperhivesource from the provided document data Parameters: Name Type Description adapter PaperhiveAdapter The adapter the new source will be associated with. ph_document Object Data of a paperhive document. See PaperhiveSource.getDocument Returns: New instance of Paperhivesource Type Paperhivesource &lt;async, static&gt; getDocument(document_id) Fetch document data from the paperhive API Parameters: Name Type Description document_id String The paperhive document id Throws: If paperhive API request fails Type Error Returns: The document's data Type Object &lt;async, static&gt; guess(adapter, str) Tries to guess a document id from provided string and create a new instance of PaperhiveSource associated with it. Parameters: Name Type Description adapter PaperhiveAdapter The adapter the new source will be associated with. str String A string to guess the document id from. Throws: If adapter is missing Type ReferenceError If str is not a string Type TypeError If str contains no matchable document_id Type DocloopError Returns: Type PaperhiveSource &lt;async&gt; getDiscussions() Fetch discussion data form the paperhive API. Throws: If paperhive API request fails Type Error Returns: Type Object phDiscussion2Annotation(discussion) Convert discussion data into Annotation Parameters: Name Type Description discussion Object Returns: Type Annotation phReply2Reply(discussion) Convert reply data into Reply. Parameters: Name Type Description discussion Object Returns: Type Annotation &lt;async&gt; scan() Scan the source for new annotations and replies. Fires: docloop~event:annotation docloop~event:reply Returns: undefined &lt;async&gt; validate() Validate the source by checking if the associated document's discussion is readable. Throws: If document's discussion are not readable Type DocloopError × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "},"tutorial-custom_adapters.html":{"id":"tutorial-custom_adapters.html","title":"Tutorial: Custom adapters","body":" docloop Modules docloopgithubAdapterpaperhiveAdapter Classes DocloopCoreEventQueuedocloop.DocloopAdapterdocloop.DocloopEndpointdocloop.DocloopErrordocloop.DocloopLinkdocloop.EventQueue~QueuedEventgithubAdapter.GithubAdaptergithubAdapter.GithubAppgithubAdapter.GithubTargetgithubAdapter.GithubUserpaperhiveAdapter.PaperhiveAdapterpaperhiveAdapter.PaperhiveSource Events docloop.DocloopAdapter.event:annotationdocloop.DocloopCore.event:link-establisheddocloop.DocloopCore.event:link-removeddocloop.DocloopCore.event:link-updateddocloop.EventQueue.event:-attemptdocloop.EventQueue.event:-donedocloop.EventQueue.event:-fail Tutorials Custom adapters Global Global Custom adapters In order to make the most use of the DocloopCore you can write your own custom adapters for any platform, online service or tool you like. Every custom adapter has to provide two things: an adapter class an endpoint class The adapter class is expected to extend DocloopAdapter and the endpoint class should extend DocloopEndpoint. The method of DocloopAdapter and DocloopEndpoint marked as abstract are meant to be overwritten by your custom classes. Example source adapterThis source adapter will provide three fixed sources and for every source that is linked to a target it will trigger a mock annotation. var docloop = require(docloop), DocloopAdapter = docloop.DocloopAdapter, DocloopEndpoint = docloop.DocloopEndpoint class ExampleSourceAdapter extends DocloopAdapter { //Every adapter expects the core and a configuration object as arguments for its constructor: constructor(core, config){ super(core, { ...config, id: 'example-source-adapter', name: 'Example Source Adapter', type: 'source', endpointClass: ExampleSource, //see below }) //make all stored events announce annotation every 5 seconds; see below setInterval( () =&gt; this.mockScan(), 5000) } //We are just returning a fixed set of endpoints. //A real-life adapter should query some external resource making use of data stored with the session. async getEndpoints(session){ return [ //creates an instance of ExampleSource with this adapter instance as adapter: this.newEndpoint({ identifier: { adapter: 'example-source-adapter', name: 'source-one' }, decor:{ title: 'Source One', details: 'the first example source' } }), this.newEndpoint({ identifier: { adapter: 'example-source-adapter', name: 'source-two' }, decor:{ title: 'Source Two', details: 'the second example source' } }), this.newEndpoint({ identifier: { adapter: 'example-source-adapter', name: 'source-three' }, decor:{ title: 'Source Three', details: 'the thrid example source' } }), ] } //This method should actually only return stored endpoint relevant to the session, but as before, we ignore that for the example. async getStoredEndpoints(session){ var raw_endpoints = await this.endpoints.find({}).toArray() return raw_endpoints.map( endpoint_data =&gt; this.newEndpoint(endpoint_data)) } async mockScan(){ //make each stored source emit an annotation event on the adapter var sources = await this.getStoredEndpoints() sources.forEach( source =&gt; { this.emit('annotation', { annotation:{ id: 123, sourceName: this.name, sourceHome: undefined, title: &quot;Example Annotation – &quot;+source.identifier.name, author: &quot;Example Author&quot;, body: new Date().toString(), respectiveContent: undefined, original: source.identifier.name, }, //this part makes the core reemit this event, replacing source EndpointSkeleton with a linked target EndpointSkeleton: source: source.skeleton }) }) } } class ExampleSource extends DocloopEndpoint{ //Every Endpoint expects an adapter instance and EndpointData as arguments for its constructor: constructor(adapter, data){ super(adapter, data) } //validate the endpoint no matter what, not a good idea for a rea-life adapter! async validate(session_data){ return true } }Example target adapterThis target adapter provides two fixed targets. It will listen for annotations and log corresponding data to the console. class ExampleTargetAdapter extends DocloopAdapter { //Every adapter expects the core and a configuration object as arguments for its constructor: constructor(core, config){ super(core, { ...config, id: 'example-target-adapter', name: 'Example Target Adapter', type: 'target', endpointClass: ExampleTarget, //see below endpointDefaultConfig: { doTheTargetThing: true } }) //Listen for annotations: this.core.on('annotation', this.handleAnnotation.bind(this)) } async getEndpoints(session_data){ //We are just returning a fixed set of endpoints. //A real-life adapter should query some external resource making use of data stored with the session. return [ //creates an instance of ExampleTarget with this adapter instance as adapter: this.newEndpoint({ identifier: { adapter: 'example-target-adapter', name: 'target-a' }, decor:{ title: 'Target A', details: 'the first example target' } }), this.newEndpoint({ identifier: { adapter: 'example-target-adapter', name: 'target-b' }, decor:{ title: 'Target B', details: 'the second example target' } }) ] } //This method should actually only return stored endpoint relevant to the session. but as before, we ignore that for the exmaple. async getStoredEndpoints(session){ var raw_endpoints = await this.endpoints.find({}).toArray() return raw_endpoints.map( endpoint_data =&gt; this.newEndpoint(endpoint_data)) } async handleAnnotation(annotation_data){ //check if the annotation was meant to be proccessed by this adapter; if not leave. if(annotation_data.target.adapter != this.id) return null var target = await this.getStoredEndpoint(annotation_data.target.id), a = annotation_data.annotation if(target){ console.log(`New issue for ${target.identifier.name}@${target.identifier.adapter} (spawned by ${a.original})`) console.log(` =&gt; ${a.author} says: &quot;Greetings from ${a.title}&quot; at ${a.body} `) } } } class ExampleTarget extends DocloopEndpoint{ //Every Endpoint expects an adapter instance and EndpointData as arguments for its constructor: constructor(adapter, data){ super(adapter, data) } //validate the endpoint no matter what, not a good idea for a rea-life adapter! async validate(session_Data){ return true } }Put it all togetherThe core can use the two adapters like this: //log whenever a new link is established docloopCore.on('link-established', link =&gt; console.log(`Link established: ${link.source.adapter} &lt;-&gt; ${link.target.adapter}`)) docloopCore .use(ExampleSourceAdapter) .use(ExampleTargetAdapter) .run()Before all this works you have to configure the DocloopCore itself; here's an example of how this will work: README If everything is up an running, you should be able to use the client (see README). Go ahead and select the source adapter and one of the three sources. Then select the target adapter and on eof the two targets. Creating the link should spwan a message on the console. From now on every five seconds the console will log the targets' processing of the annotations created by the mock scan above. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-02-27T22:53:36+01:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
